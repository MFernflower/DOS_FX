use16
org 0x100
mov ax, 0x0003  ; text mode 80x25 16 colours
int 0x10
mov si,PAYLOAD
mov ax,0B800h
mov es,ax
mov cx,0x8B1; LENGTH OF PAYLOAD IMAGE
call writeimage 
xor dx,dx
xor ax,ax
int 1ah      ; get the time of day count
add dx,100   ; this is a okay delay for what we are doing
mov bx,dx    ; store end of delay value in bx
wait1:                           
int 1ah
cmp dx,bx
jne wait1
mov cx,0x8B1 ; refresh CX
and si,ax ; mess with image data
call writeimage ; display it
ret



writeimage:                            ; this function was created by one Ian E. Davis -- I only changed like 4 lines to get it to compile with FASM
       PUSHA                           ; Save registers (186 and onward cpu's)
	   XOR DX,DX                       ; DX holds some screen location thing - since we want the center of the screen - zero it out
	   JCXZ Done
       XOR AX,AX                       ; zero out AX too!
       CLD

LOOPA: LODSB                           ;Get next character.
       CMP     AL,32                   ;If a control character, jump.
       JC      ForeGround
       STOSW                           ;Save letter on screen.
Next:  LOOP    LOOPA
       JMP     Done                    ; may need to be marked as short for some --- FASM did not care 

ForeGround:
       CMP     AL,16                   ;If less than 16, then change the
       JNC     BackGround              ;foreground color.  Otherwise jump.
       AND     AH,0F0H                 ;Strip off old foreground.
       OR      AH,AL
       JMP     Next

BackGround:
       CMP     AL,24                   ;If less than 24, then change the
       JZ      NextLine                ;background color.  If exactly 24,
       JNC     FlashBitToggle          ;then jump down to next line.
       SUB     AL,16                   ;Otherwise jump to multiple output
       ADD     AL,AL                   ;routines.
       ADD     AL,AL
       ADD     AL,AL
       ADD     AL,AL
       AND     AH,8FH                  ;Strip off old background.
       OR      AH,AL
       JMP     Next

NextLine:
       ADD     DX,160                  ;If equal to 24,
       MOV     DI,DX                   ;then jump down to
       JMP     Next                    ;the next line.

FlashBitToggle:
       CMP     AL,27                   ;Does user want to toggle the blink
       JC      MultiOutput             ;attribute?
       JNZ     Next
       XOR     AH,128                  ;Done.
       JMP     Next

MultiOutput:
       CMP     AL,25                   ;Set Z flag if multi-space output.
       MOV     BX,CX                   ;Save main counter.
       LODSB                           ;Get count of number of times
       MOV     CL,AL                   ;to display character.
       MOV     AL,32
       JZ      StartOutput             ;Jump here if displaying spaces.
       LODSB                           ;Otherwise get character to use.
       DEC     BX                      ;Adjust main counter.

StartOutput:
       XOR     CH,CH
       INC     CX
       REP STOSW
       MOV     CX,BX
       DEC     CX                      ;Adjust main counter.
       LOOPNZ  LOOPA                   ;Loop if anything else to do...

Done:  
       POPA
       RET



PAYLOAD:
        DB      9,16,25,8,1,27,19,'“',16,'  ',9,27,'ƒƒ',13,27,17,'ﬂﬂ'
        DB      'ﬂ',9,27,16,'ƒƒ',17,' ',16,26,0,1,26,'&ƒ',5,19,26,2,1
        DB      24,13,21,'ﬂ‹',4,'ﬂ',12,20,'ﬂ‹',7,'ﬂ',15,23,'ﬂﬂﬂ‹',3,'ﬂ'
        DB      9,16,26,0,1,26,3,15,5,26,2,15,15,26,2,15,13,27,17,'ﬂ'
        DB      'ﬂ',15,27,16,26,2,15,13,27,17,'ﬂﬂ',16,25,2,9,27,'≥≥',15
        DB      26,1,15,5,26,2,15,9,26,3,15,26,8,19,4,17,26,0,1,9,27,26
        DB      16,1,27,16,'‹‹ﬂﬂ‹ﬂ',24,1,'ﬂ',15,26,0,15,13,'ﬂ',21,'‹'
        DB      4,'ﬂ',12,16,'ﬂ',20,'ﬂ‹',7,'ﬂ',16,'ﬂ',15,23,'ﬂ‹',13,27
        DB      17,26,18,'ﬂ',9,27,16,'ﬂ‹ﬂ',13,27,17,26,5,'ﬂ',9,27,16,26
        DB      0,19,'‹',13,27,17,26,4,'ﬂ',8,26,0,1,13,26,7,'ﬂ',8,26,1
        DB      1,13,26,6,'ﬂ',16,' ',17,26,4,'ﬂ',24,15,27,16,26,2,15,13
        DB      'ﬂ',21,'‹',4,'ﬂ',12,20,'ﬂ‹',7,'ﬂ',15,23,'ﬂ‹',3,'ﬂ',9,16
        DB      'ﬂ',13,27,17,'ﬂﬂﬂ',9,27,16,'ﬂ‹',13,27,17,'ﬂﬂ',5,27,16
        DB      26,0,15,13,27,17,26,3,'ﬂ',3,27,16,'ﬂ',13,27,17,26,16,'ﬂ'
        DB      9,27,16,'‹ﬂ',13,27,17,'ﬂﬂﬂ',9,27,16,'ﬂ',13,27,17,'ﬂﬂ'
        DB      'ﬂ',9,27,16,26,0,19,13,27,17,26,11,'ﬂ',9,27,16,'ﬂ',13
        DB      27,17,26,4,'ﬂ',9,27,16,'ﬂﬂ‹ﬂﬂ',26,0,15,'‹ﬂﬂ',24,13,27
        DB      17,'ﬂﬂ',9,27,16,26,0,15,13,27,17,'ﬂﬂ',9,27,16,'‹',13,27
        DB      17,26,4,'ﬂ',9,27,16,'ﬂ',13,27,17,'ﬂ',1,19,'ı',13,17,26
        DB      5,'ﬂ',5,27,16,26,0,15,13,27,17,26,13,'ﬂ',16,' ',17,26
        DB      6,'ﬂ',9,27,16,'ﬂ',13,27,17,26,29,'ﬂ',9,27,16,'‹',26,0
        DB      15,'ﬂﬂ‹',24,'ﬂ',13,27,17,'ﬂﬂ',21,'  ',8,17,26,1,1,13,26
        DB      5,'ﬂ  ',26,6,'ﬂ ',26,9,'ﬂ ',26,6,'ﬂ  ',26,23,'ﬂ',9,27
        DB      16,'‹ﬂ',26,0,15,'ﬂ',13,27,17,26,3,'ﬂ',24,9,27,16,'‹',13
        DB      27,17,26,'Iﬂ',9,27,16,'ﬂ',13,27,17,'ﬂﬂﬂ',9,27,16,'ﬂ',24
        DB      13,27,17,'ﬂﬂ',9,27,16,'ﬂ',27,21,'a',13,17,'ﬂ',9,27,16
        DB      'ﬂ',13,27,17,'ﬂﬂ',9,27,16,'ƒ',13,27,17,'ﬂﬂ',9,27,16,'ﬂ'
        DB      13,27,17,'ﬂﬂ',9,27,16,'ﬂ',13,27,17,'ﬂﬂ',9,27,16,'“',13
        DB      27,17,'ﬂﬂ',1,19,'‹€€‹',13,17,'ﬂﬂ',3,27,16,26,0,15,1,27
        DB      19,'‹€€‹',13,17,'ﬂ',16,' ',17,'ﬂﬂ',12,27,16,'‹',13,27
        DB      17,'ﬂﬂ',15,27,16,'‹',13,27,17,'ﬂﬂ',9,27,16,26,0,15,13
        DB      27,17,'ﬂﬂ',9,27,16,'‹',13,27,17,'ﬂﬂ',9,27,16,'ﬂ',13,27
        DB      17,'ﬂﬂ',9,27,16,26,0,19,13,27,17,'ﬂﬂ',9,27,16,'‹',13,27
        DB      17,'ﬂﬂ',9,27,16,'ﬂ',13,27,17,'ﬂﬂ',9,27,16,26,0,1,13,27
        DB      17,'ﬂﬂ',9,27,16,'ﬂ',13,27,17,'ﬂﬂ',9,27,16,'ﬂ',13,27,17
        DB      'ﬂﬂ',9,27,16,'ƒ',13,27,17,'ﬂﬂ',16,' ',17,'ﬂﬂ',16,' ',17
        DB      'ﬂﬂ',16,' ',17,'ﬂﬂ',24,9,27,16,'ﬂ',13,27,17,'ﬂﬂﬂ',9,27
        DB      16,'ﬂ‹',13,27,17,'ﬂ',9,27,16,'ﬂƒƒ',13,27,17,'ﬂﬂﬂ',9,27
        DB      16,'ﬂ‹',5,17,'ﬂ',13,21,'ﬂ‹',4,'ﬂ',12,20,'ﬂ',1,27,19,26
        DB      3,'€',13,17,'ﬂ',15,27,16,26,0,15,10,'‹',13,21,'ﬂ‹',4,'ﬂ'
        DB      12,20,'ﬂ‹',4,16,'‹',13,27,17,'ﬂﬂﬂ',9,27,16,'ﬂ',26,0,15
        DB      13,27,17,'ﬂ',9,27,16,'‹ﬂﬂ',13,27,17,'ﬂﬂﬂ',9,27,16,'‹'
        DB      'ﬂ',13,27,17,'ﬂ',9,27,16,'‹',26,0,1,'ﬂ',13,27,17,'ﬂﬂ'
        DB      'ﬂ',9,27,16,'‹‹',13,27,17,'ﬂ',9,27,16,'‹‹',26,0,1,13,27
        DB      17,'ﬂﬂﬂ',9,27,16,'ﬂ',13,27,17,'ﬂ',9,27,16,'‹ﬂ‹',13,27
        DB      17,'ﬂﬂﬂ',16,'  ',17,'ﬂ',24,9,27,16,26,1,15,13,27,17,26
        DB      3,'ﬂ',9,27,16,26,0,15,19,25,8,17,'‹',5,16,'ﬂ  ',1,27,19
        DB      26,3,'€',15,27,23,'ﬂ',17,' ',2,22,'ﬂ',1,27,19,26,3,'€'
        DB      13,17,'ﬂﬂ ',5,27,16,'ﬂ',4,'ﬂ',12,'ﬂ',25,5,14,'TITANI'
        DB      'UM 2 STEP - (C) 2021',13,27,17,'ﬂ',24,27,21,'‹',4,'ﬂ'
        DB      12,16,'ﬂ',3,'ƒ',1,18,'ﬂ',9,17,'ﬂ‹',5,'ﬂ',13,21,'ﬂ‹',4
        DB      'ﬂ',12,20,'ﬂ',1,27,'‹',7,27,'ﬂ',10,18,'ﬂ‹',1,'ﬂ',16,'‹'
        DB      9,'““',1,27,19,'‹',26,3,'€',17,' ',14,27,22,'ﬂ‹',2,'ﬂ'
        DB      10,18,'ﬂ',16,'‹',2,'‹',1,'‹',9,'‹',17,25,3,6,19,26,11
        DB      1,16,25,4,17,25,10,24,5,16,26,4,'ƒ',2,'ﬂ',5,17,'ﬂ',13
        DB      21,'ﬂ',5,16,'ﬂ',26,1,15,11,19,'‹',6,'ﬂ',14,22,'ﬂ‹',2,16
        DB      'ﬂ',10,'ﬂ',2,'ﬂ',1,'ﬂ ',27,19,26,10,'€',4,27,21,'ﬂ',12
        DB      16,'ﬂ',5,26,1,15,13,'ﬂ',21,'‹',4,'ﬂ',13,'‹',4,'ﬂ',12,20
        DB      'ﬂ',14,16,'ﬂ',6,'ﬂ',2,'ﬂ',15,23,'‹',3,'ﬂ',11,19,'ﬂ‹‹'
        DB      '‹',6,'ﬂ',14,22,'ﬂ',5,16,26,1,15,2,'ﬂ',24,5,17,'ﬂ',13
        DB      21,'ﬂ‹',5,16,'‹',9,26,9,'“',6,19,'ﬂ',14,22,'ﬂ‹',2,'ﬂ'
        DB      9,16,'“',1,27,19,'€€ﬂ',17,' ',19,'ﬂ€€ﬂ',17,25,6,9,27,'‹'
        DB      1,27,19,'‹€€',9,27,17,'‹',5,'ﬂ',13,21,'ﬂ‹',4,'ﬂ',12,20
        DB      'ﬂ‹',7,'ﬂ',15,23,'ﬂﬂ',16,'  ',1,27,19,'“',16,25,3,19,'‹'
        DB      16,25,4,14,27,'√≥√¥¥√ƒ≥√¥øƒ≥Ÿƒ≥¿¿ƒ',24,13,27,17,'ﬂ',9
        DB      27,'‹',5,'ﬂ',13,21,'ﬂ‹',15,23,'ﬂ',9,16,'“““',1,27,19,'ﬂ'
        DB      'ﬂ',6,27,26,2,1,11,16,'ﬂ',19,'‹',6,'ﬂ',14,16,'ﬂ',6,19
        DB      26,2,1,2,16,'ﬂ',1,18,'ﬂ',9,17,'ﬂ',1,16,'ﬂ',6,19,26,0,1
        DB      15,16,'ﬂ',23,'‹',3,'ﬂ',11,16,'ﬂ',6,19,26,3,1,1,27,26,3
        DB      '€',27,18,'ﬂ',9,17,'ﬂ',1,16,'ﬂ',15,26,0,15,13,'ﬂ',21,'‹'
        DB      4,'ﬂ',12,16,'ﬂ',20,'ﬂ‹',16,' ',15,23,'ﬂ‹',3,'ﬂ',9,16,26
        DB      0,1,11,'‹',3,'‹',17,' ',5,16,'ﬂ',4,'ﬂ',12,'ﬂ',25,17,9
        DB      '“',13,27,17,'ﬂﬂ',24,' ',9,27,16,'ﬂ',17,'ﬂ‹',5,'ﬂ',12
        DB      20,'‹',7,'ﬂ',5,16,26,2,15,1,27,19,'ﬂﬂ',6,27,'ﬂ',14,22
        DB      'ﬂ',5,16,26,0,15,4,'ﬂ',7,'ﬂ',15,'ﬂ',7,'ﬂ',3,23,'ﬂ',11
        DB      19,'ﬂ‹',6,'ﬂ',14,16,'ﬂ',6,'ﬂ',2,'ﬂ',10,'ﬂ',3,26,4,15,' '
        DB      ' ',1,27,19,'ﬂ€€€',2,27,16,'ﬂ',25,5,15,26,0,15,25,2,7
        DB      20,'ﬂ',16,'ﬂ',15,23,'ﬂ‹',3,'ﬂ',11,19,'ﬂ',9,16,'‹',17,25
        DB      3,6,19,26,11,1,16,25,4,17,25,2,24,16,' ',21,25,8,1,27
        DB      19,'ﬂﬂ',21,25,5,16,25,7,7,27,20,'ﬂ',16,25,3,21,25,5,1
        DB      27,19,'ﬂ',12,27,16,'ﬂ',15,26,4,15,13,'ﬂ',21,'‹',4,'ﬂ'
        DB      12,20,'ﬂ‹',7,'ﬂ',15,23,'ﬂ‹',3,'ﬂ',16,'  ',5,26,1,15,13
        DB      'ﬂ',21,'‹',4,'ﬂ',13,'‹',4,'ﬂ',12,20,'ﬂ',14,16,'ﬂ',6,'ﬂ'
        DB      2,'ﬂ',15,23,'‹',3,'ﬂ',11,19,'ﬂ‹‹‹',6,'ﬂ',14,22,'ﬂ',5,16
        DB      26,1,15,2,'ﬂ',24,' ',14,22,'‹',2,'ﬂ',10,18,'ﬂ',2,16,'ﬂ'
        DB      13,21,'ﬂ‹',5,16,'‹',12,20,'ﬂ',16,'‹',1,27,19,'ﬂﬂ',15,27
        DB      23,'‹',3,'ﬂ',15,16,26,4,15,12,20,'‹',7,'ﬂ',15,23,'ﬂ‹'
        DB      16,26,8,15,'  ',1,27,19,26,3,'€',9,27,16,26,6,'ƒ',25,9
        DB      17,' ‹',1,27,19,'‹€€',16,25,11,19,'“',16,25,3,19,'‹',24
        DB      6,27,26,0,1,'ﬂ',14,16,'ﬂ',22,'‹',2,'ﬂ',9,17,'‹',5,'ﬂ'
        DB      13,21,'ﬂ‹',1,27,19,'ﬂﬂ',12,27,20,'‹',7,'ﬂ',15,23,'ﬂ',16
        DB      26,4,15,4,21,'ﬂ',12,20,'ﬂ‹',7,'ﬂ',15,16,26,8,15,25,2,1
        DB      27,19,'ﬂ',26,6,'€ﬂ',13,27,16,'ﬂ',21,'‹',4,'ﬂ',1,27,19
        DB      'ﬂ',26,6,'€',6,27,26,0,1,1,27,26,3,'€',9,27,17,'ﬂ‹',5
        DB      'ﬂ',13,21,'ﬂ‹',4,'ﬂ',12,20,'ﬂ‹',7,'ﬂ',15,23,'ﬂﬂﬂ‹',3,'ﬂ'
        DB      9,16,26,0,1,11,'‹',3,'‹',1,27,19,'€€',6,27,26,0,1,24,16
        DB      '‹',3,'ﬂ',15,26,0,15,19,' ',1,27,'÷ƒƒ∑',13,27,21,'‹',4
        DB      'ﬂ',12,16,'ﬂ',15,26,5,15,13,'ﬂ',21,'‹',4,'ﬂ',12,16,'ﬂ'
        DB      15,26,8,15,25,3,9,'≥≥',15,26,18,15,' ',1,27,19,'ﬂ€€€'
        DB      2,27,16,'ﬂ',1,18,'ﬂ',9,17,'ﬂ',1,16,'ﬂ',15,26,0,15,13,'ﬂ'
        DB      21,'‹',4,'ﬂ',12,16,'ﬂ',20,'ﬂ‹',7,'ﬂ',16,'ﬂ',15,23,'ﬂ'
        DB      '‹',3,'ﬂ',11,19,'ﬂ',3,16,'‹',6,'‹',14,'‹',24,' ',9,26
        DB      24,'ƒŸ¿',26,26,'ƒ',21,25,3,1,27,19,'ﬂ',12,27,16,'ﬂ',15
        DB      26,4,15,13,'ﬂ',21,'‹',4,'ﬂ',12,20,'ﬂ‹',7,'ﬂ',15,23,'ﬂ'
        DB      '‹',3,'ﬂ',16,'  ',1,27,19,'€‹',24,11,27,16,'‹',25,'6'
        DB      1,27,19,26,3,'€',9,27,16,26,6,'ƒ',25,9,1,27,19,'€€',15
        DB      27,16,26,0,15,24,3,23,'ﬂ',16,25,6,9,27,19,'It',39,'s'
        DB      ' taking too long to figure ',1,'it out!',16,25,10,19
        DB      'ﬂ',26,6,'€ﬂ',13,27,16,'ﬂ',21,'‹',4,'ﬂ',1,27,19,'ﬂ',26
        DB      6,'€ﬂ',15,27,23,'ﬂ‹',24,16,25,6,14,'≥√≥≥≥',26,10,'√≥'
        DB      '√≥¥√ƒ≥√¥ƒ≥≥ƒ¥√≥√¥ƒ≥¥ƒ≥¥√≥√¥ƒ≥√¥ƒ≥√¥≥√ƒ≥≥√¥≥ƒ¥√≥ƒ√¥≥'
        DB      '√¥ƒ≥¥',24,24,24
