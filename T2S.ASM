use16
org 0x100
mov ax, 0x0003  ; text mode 80x25 16 colours
int 0x10
mov si,PAYLOAD
mov ax,0B800h
mov es,ax
mov cx,0x8B1; LENGTH OF PAYLOAD IMAGE
call writeimage 
xor dx,dx
xor ax,ax
int 1ah      ; get the time of day count
add dx,100   ; this is a okay delay for what we are doing
mov bx,dx    ; store end of delay value in bx
wait1:                           
int 1ah
cmp dx,bx
jne wait1
mov cx,0x8B1 ; refresh CX
and si,ax ; mess with image data
call writeimage ; display it
ret



writeimage:                            ; this function was created by one Ian E. Davis -- I only changed like 4 lines to get it to compile with FASM
       PUSHA                           ; Save registers (186 and onward cpu's)
	   XOR DX,DX                       ; DX holds some screen location thing - since we want the center of the screen - zero it out
	   JCXZ Done
       XOR AX,AX                       ; zero out AX too!
       CLD

LOOPA: LODSB                           ;Get next character.
       CMP     AL,32                   ;If a control character, jump.
       JC      ForeGround
       STOSW                           ;Save letter on screen.
Next:  LOOP    LOOPA
       JMP     Done                    ; may need to be marked as short for some --- FASM did not care 

ForeGround:
       CMP     AL,16                   ;If less than 16, then change the
       JNC     BackGround              ;foreground color.  Otherwise jump.
       AND     AH,0F0H                 ;Strip off old foreground.
       OR      AH,AL
       JMP     Next

BackGround:
       CMP     AL,24                   ;If less than 24, then change the
       JZ      NextLine                ;background color.  If exactly 24,
       JNC     FlashBitToggle          ;then jump down to next line.
       SUB     AL,16                   ;Otherwise jump to multiple output
       ADD     AL,AL                   ;routines.
       ADD     AL,AL
       ADD     AL,AL
       ADD     AL,AL
       AND     AH,8FH                  ;Strip off old background.
       OR      AH,AL
       JMP     Next

NextLine:
       ADD     DX,160                  ;If equal to 24,
       MOV     DI,DX                   ;then jump down to
       JMP     Next                    ;the next line.

FlashBitToggle:
       CMP     AL,27                   ;Does user want to toggle the blink
       JC      MultiOutput             ;attribute?
       JNZ     Next
       XOR     AH,128                  ;Done.
       JMP     Next

MultiOutput:
       CMP     AL,25                   ;Set Z flag if multi-space output.
       MOV     BX,CX                   ;Save main counter.
       LODSB                           ;Get count of number of times
       MOV     CL,AL                   ;to display character.
       MOV     AL,32
       JZ      StartOutput             ;Jump here if displaying spaces.
       LODSB                           ;Otherwise get character to use.
       DEC     BX                      ;Adjust main counter.

StartOutput:
       XOR     CH,CH
       INC     CX
       REP STOSW
       MOV     CX,BX
       DEC     CX                      ;Adjust main counter.
       LOOPNZ  LOOPA                   ;Loop if anything else to do...

Done:  
       POPA
       RET



PAYLOAD:
        DB      9,16,25,8,1,27,19,'Ò',16,'  ',9,27,'ÄÄ',13,27,17,'ßß'
        DB      'ß',9,27,16,'ÄÄ',17,' ',16,26,0,1,26,'&Ä',5,19,26,2,1
        DB      24,13,21,'ßÜ',4,'ß',12,20,'ßÜ',7,'ß',15,23,'ßßßÜ',3,'ß'
        DB      9,16,26,0,1,26,3,15,5,26,2,15,15,26,2,15,13,27,17,'ß'
        DB      'ß',15,27,16,26,2,15,13,27,17,'ßß',16,25,2,9,27,'³³',15
        DB      26,1,15,5,26,2,15,9,26,3,15,26,8,19,4,17,26,0,1,9,27,26
        DB      16,1,27,16,'ÜÜßßÜß',24,1,'ß',15,26,0,15,13,'ß',21,'Ü'
        DB      4,'ß',12,16,'ß',20,'ßÜ',7,'ß',16,'ß',15,23,'ßÜ',13,27
        DB      17,26,18,'ß',9,27,16,'ßÜß',13,27,17,26,5,'ß',9,27,16,26
        DB      0,19,'Ü',13,27,17,26,4,'ß',8,26,0,1,13,26,7,'ß',8,26,1
        DB      1,13,26,6,'ß',16,' ',17,26,4,'ß',24,15,27,16,26,2,15,13
        DB      'ß',21,'Ü',4,'ß',12,20,'ßÜ',7,'ß',15,23,'ßÜ',3,'ß',9,16
        DB      'ß',13,27,17,'ßßß',9,27,16,'ßÜ',13,27,17,'ßß',5,27,16
        DB      26,0,15,13,27,17,26,3,'ß',3,27,16,'ß',13,27,17,26,16,'ß'
        DB      9,27,16,'Üß',13,27,17,'ßßß',9,27,16,'ß',13,27,17,'ßß'
        DB      'ß',9,27,16,26,0,19,13,27,17,26,11,'ß',9,27,16,'ß',13
        DB      27,17,26,4,'ß',9,27,16,'ßßÜßß',26,0,15,'Üßß',24,13,27
        DB      17,'ßß',9,27,16,26,0,15,13,27,17,'ßß',9,27,16,'Ü',13,27
        DB      17,26,4,'ß',9,27,16,'ß',13,27,17,'ß',1,19,'õ',13,17,26
        DB      5,'ß',5,27,16,26,0,15,13,27,17,26,13,'ß',16,' ',17,26
        DB      6,'ß',9,27,16,'ß',13,27,17,26,29,'ß',9,27,16,'Ü',26,0
        DB      15,'ßßÜ',24,'ß',13,27,17,'ßß',21,'  ',8,17,26,1,1,13,26
        DB      5,'ß  ',26,6,'ß ',26,9,'ß ',26,6,'ß  ',26,23,'ß',9,27
        DB      16,'Üß',26,0,15,'ß',13,27,17,26,3,'ß',24,9,27,16,'Ü',13
        DB      27,17,26,'Iß',9,27,16,'ß',13,27,17,'ßßß',9,27,16,'ß',24
        DB      13,27,17,'ßß',9,27,16,'ß',27,21,'a',13,17,'ß',9,27,16
        DB      'ß',13,27,17,'ßß',9,27,16,'Ä',13,27,17,'ßß',9,27,16,'ß'
        DB      13,27,17,'ßß',9,27,16,'ß',13,27,17,'ßß',9,27,16,'Ò',13
        DB      27,17,'ßß',1,19,'ÜÛÛÜ',13,17,'ßß',3,27,16,26,0,15,1,27
        DB      19,'ÜÛÛÜ',13,17,'ß',16,' ',17,'ßß',12,27,16,'Ü',13,27
        DB      17,'ßß',15,27,16,'Ü',13,27,17,'ßß',9,27,16,26,0,15,13
        DB      27,17,'ßß',9,27,16,'Ü',13,27,17,'ßß',9,27,16,'ß',13,27
        DB      17,'ßß',9,27,16,26,0,19,13,27,17,'ßß',9,27,16,'Ü',13,27
        DB      17,'ßß',9,27,16,'ß',13,27,17,'ßß',9,27,16,26,0,1,13,27
        DB      17,'ßß',9,27,16,'ß',13,27,17,'ßß',9,27,16,'ß',13,27,17
        DB      'ßß',9,27,16,'Ä',13,27,17,'ßß',16,' ',17,'ßß',16,' ',17
        DB      'ßß',16,' ',17,'ßß',24,9,27,16,'ß',13,27,17,'ßßß',9,27
        DB      16,'ßÜ',13,27,17,'ß',9,27,16,'ßÄÄ',13,27,17,'ßßß',9,27
        DB      16,'ßÜ',5,17,'ß',13,21,'ßÜ',4,'ß',12,20,'ß',1,27,19,26
        DB      3,'Û',13,17,'ß',15,27,16,26,0,15,10,'Ü',13,21,'ßÜ',4,'ß'
        DB      12,20,'ßÜ',4,16,'Ü',13,27,17,'ßßß',9,27,16,'ß',26,0,15
        DB      13,27,17,'ß',9,27,16,'Üßß',13,27,17,'ßßß',9,27,16,'Ü'
        DB      'ß',13,27,17,'ß',9,27,16,'Ü',26,0,1,'ß',13,27,17,'ßß'
        DB      'ß',9,27,16,'ÜÜ',13,27,17,'ß',9,27,16,'ÜÜ',26,0,1,13,27
        DB      17,'ßßß',9,27,16,'ß',13,27,17,'ß',9,27,16,'ÜßÜ',13,27
        DB      17,'ßßß',16,'  ',17,'ß',24,9,27,16,26,1,15,13,27,17,26
        DB      3,'ß',9,27,16,26,0,15,19,25,8,17,'Ü',5,16,'ß  ',1,27,19
        DB      26,3,'Û',15,27,23,'ß',17,' ',2,22,'ß',1,27,19,26,3,'Û'
        DB      13,17,'ßß ',5,27,16,'ß',4,'ß',12,'ß',25,5,14,'TITANI'
        DB      'UM 2 STEP - (C) 2021',13,27,17,'ß',24,27,21,'Ü',4,'ß'
        DB      12,16,'ß',3,'Ä',1,18,'ß',9,17,'ßÜ',5,'ß',13,21,'ßÜ',4
        DB      'ß',12,20,'ß',1,27,'Ü',7,27,'ß',10,18,'ßÜ',1,'ß',16,'Ü'
        DB      9,'ÒÒ',1,27,19,'Ü',26,3,'Û',17,' ',14,27,22,'ßÜ',2,'ß'
        DB      10,18,'ß',16,'Ü',2,'Ü',1,'Ü',9,'Ü',17,25,3,6,19,26,11
        DB      1,16,25,4,17,25,10,24,5,16,26,4,'Ä',2,'ß',5,17,'ß',13
        DB      21,'ß',5,16,'ß',26,1,15,11,19,'Ü',6,'ß',14,22,'ßÜ',2,16
        DB      'ß',10,'ß',2,'ß',1,'ß ',27,19,26,10,'Û',4,27,21,'ß',12
        DB      16,'ß',5,26,1,15,13,'ß',21,'Ü',4,'ß',13,'Ü',4,'ß',12,20
        DB      'ß',14,16,'ß',6,'ß',2,'ß',15,23,'Ü',3,'ß',11,19,'ßÜÜ'
        DB      'Ü',6,'ß',14,22,'ß',5,16,26,1,15,2,'ß',24,5,17,'ß',13
        DB      21,'ßÜ',5,16,'Ü',9,26,9,'Ò',6,19,'ß',14,22,'ßÜ',2,'ß'
        DB      9,16,'Ò',1,27,19,'ÛÛß',17,' ',19,'ßÛÛß',17,25,6,9,27,'Ü'
        DB      1,27,19,'ÜÛÛ',9,27,17,'Ü',5,'ß',13,21,'ßÜ',4,'ß',12,20
        DB      'ßÜ',7,'ß',15,23,'ßß',16,'  ',1,27,19,'Ò',16,25,3,19,'Ü'
        DB      16,25,4,14,27,'Ã³Ã´´ÃÄ³Ã´¿Ä³ÙÄ³ÀÀÄ',24,13,27,17,'ß',9
        DB      27,'Ü',5,'ß',13,21,'ßÜ',15,23,'ß',9,16,'ÒÒÒ',1,27,19,'ß'
        DB      'ß',6,27,26,2,1,11,16,'ß',19,'Ü',6,'ß',14,16,'ß',6,19
        DB      26,2,1,2,16,'ß',1,18,'ß',9,17,'ß',1,16,'ß',6,19,26,0,1
        DB      15,16,'ß',23,'Ü',3,'ß',11,16,'ß',6,19,26,3,1,1,27,26,3
        DB      'Û',27,18,'ß',9,17,'ß',1,16,'ß',15,26,0,15,13,'ß',21,'Ü'
        DB      4,'ß',12,16,'ß',20,'ßÜ',16,' ',15,23,'ßÜ',3,'ß',9,16,26
        DB      0,1,11,'Ü',3,'Ü',17,' ',5,16,'ß',4,'ß',12,'ß',25,17,9
        DB      'Ò',13,27,17,'ßß',24,' ',9,27,16,'ß',17,'ßÜ',5,'ß',12
        DB      20,'Ü',7,'ß',5,16,26,2,15,1,27,19,'ßß',6,27,'ß',14,22
        DB      'ß',5,16,26,0,15,4,'ß',7,'ß',15,'ß',7,'ß',3,23,'ß',11
        DB      19,'ßÜ',6,'ß',14,16,'ß',6,'ß',2,'ß',10,'ß',3,26,4,15,' '
        DB      ' ',1,27,19,'ßÛÛÛ',2,27,16,'ß',25,5,15,26,0,15,25,2,7
        DB      20,'ß',16,'ß',15,23,'ßÜ',3,'ß',11,19,'ß',9,16,'Ü',17,25
        DB      3,6,19,26,11,1,16,25,4,17,25,2,24,16,' ',21,25,8,1,27
        DB      19,'ßß',21,25,5,16,25,7,7,27,20,'ß',16,25,3,21,25,5,1
        DB      27,19,'ß',12,27,16,'ß',15,26,4,15,13,'ß',21,'Ü',4,'ß'
        DB      12,20,'ßÜ',7,'ß',15,23,'ßÜ',3,'ß',16,'  ',5,26,1,15,13
        DB      'ß',21,'Ü',4,'ß',13,'Ü',4,'ß',12,20,'ß',14,16,'ß',6,'ß'
        DB      2,'ß',15,23,'Ü',3,'ß',11,19,'ßÜÜÜ',6,'ß',14,22,'ß',5,16
        DB      26,1,15,2,'ß',24,' ',14,22,'Ü',2,'ß',10,18,'ß',2,16,'ß'
        DB      13,21,'ßÜ',5,16,'Ü',12,20,'ß',16,'Ü',1,27,19,'ßß',15,27
        DB      23,'Ü',3,'ß',15,16,26,4,15,12,20,'Ü',7,'ß',15,23,'ßÜ'
        DB      16,26,8,15,'  ',1,27,19,26,3,'Û',9,27,16,26,6,'Ä',25,9
        DB      17,' Ü',1,27,19,'ÜÛÛ',16,25,11,19,'Ò',16,25,3,19,'Ü',24
        DB      6,27,26,0,1,'ß',14,16,'ß',22,'Ü',2,'ß',9,17,'Ü',5,'ß'
        DB      13,21,'ßÜ',1,27,19,'ßß',12,27,20,'Ü',7,'ß',15,23,'ß',16
        DB      26,4,15,4,21,'ß',12,20,'ßÜ',7,'ß',15,16,26,8,15,25,2,1
        DB      27,19,'ß',26,6,'Ûß',13,27,16,'ß',21,'Ü',4,'ß',1,27,19
        DB      'ß',26,6,'Û',6,27,26,0,1,1,27,26,3,'Û',9,27,17,'ßÜ',5
        DB      'ß',13,21,'ßÜ',4,'ß',12,20,'ßÜ',7,'ß',15,23,'ßßßÜ',3,'ß'
        DB      9,16,26,0,1,11,'Ü',3,'Ü',1,27,19,'ÛÛ',6,27,26,0,1,24,16
        DB      'Ü',3,'ß',15,26,0,15,19,' ',1,27,'ÖÄÄ·',13,27,21,'Ü',4
        DB      'ß',12,16,'ß',15,26,5,15,13,'ß',21,'Ü',4,'ß',12,16,'ß'
        DB      15,26,8,15,25,3,9,'³³',15,26,18,15,' ',1,27,19,'ßÛÛÛ'
        DB      2,27,16,'ß',1,18,'ß',9,17,'ß',1,16,'ß',15,26,0,15,13,'ß'
        DB      21,'Ü',4,'ß',12,16,'ß',20,'ßÜ',7,'ß',16,'ß',15,23,'ß'
        DB      'Ü',3,'ß',11,19,'ß',3,16,'Ü',6,'Ü',14,'Ü',24,' ',9,26
        DB      24,'ÄÙÀ',26,26,'Ä',21,25,3,1,27,19,'ß',12,27,16,'ß',15
        DB      26,4,15,13,'ß',21,'Ü',4,'ß',12,20,'ßÜ',7,'ß',15,23,'ß'
        DB      'Ü',3,'ß',16,'  ',1,27,19,'ÛÜ',24,11,27,16,'Ü',25,'6'
        DB      1,27,19,26,3,'Û',9,27,16,26,6,'Ä',25,9,1,27,19,'ÛÛ',15
        DB      27,16,26,0,15,24,3,23,'ß',16,25,6,9,27,19,'It',39,'s'
        DB      ' taking too long to figure ',1,'it out!',16,25,10,19
        DB      'ß',26,6,'Ûß',13,27,16,'ß',21,'Ü',4,'ß',1,27,19,'ß',26
        DB      6,'Ûß',15,27,23,'ßÜ',24,16,25,6,14,'³Ã³³³',26,10,'Ã³'
        DB      'Ã³´ÃÄ³Ã´Ä³³Ä´Ã³Ã´Ä³´Ä³´Ã³Ã´Ä³Ã´Ä³Ã´³ÃÄ³³Ã´³Ä´Ã³ÄÃ´³'
        DB      'Ã´Ä³´',24,24,24
